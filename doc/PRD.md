# 🧠 Project Memex: Local Brain Indexer (PRD)

> "내 컴퓨터를 벗어나지 않는, 프라이버시가 보장되는 두 번째 뇌"

| 항목 | 내용 |
|------|------|
| 버전 | v1.0.0 (MVP) |
| 작성일 | 2026-01-05 |
| 작성자 | Frontend Developer |
| 상태 | In Progress |

## 1. 개요 (Overview)

### 1.1 배경

사용자는 웹 서핑 중 얻은 수많은 정보를 다시 찾는 데 어려움을 겪습니다. 기존 클라우드 기반 AI 툴은 기업 데이터 보안 및 개인 프라이버시 문제로 사용이 제한적입니다. Chrome의 Built-in AI(Gemini Nano)를 활용하면 서버 비용 없이, 데이터 유출 없이 이 문제를 해결할 수 있습니다.

### 1.2 목표

- 사용자의 브라우징 컨텍스트(텍스트/이미지)를 로컬 벡터 DB에 저장.
- 자연어 질문에 대해 로컬 AI가 RAG(검색 증강 생성) 방식으로 즉시 답변.
- Zero-Data Leakage (외부 서버 통신 0회) 달성.

## 2. 핵심 기능 (Functional Requirements)

### 2.1 P0: 핵심 경험 (MVP) ✅

- **실시간 AI 대화 (Side Panel UI):** 브라우저 사이드 패널에서 언제든 AI와 대화 가능.
- **현재 페이지 문맥 인식:** 사용자가 보고 있는 탭의 내용을 즉시 읽고 요약/답변 가능.
- **모델 상태 관리:** Gemini Nano 모델 다운로드 상태를 UI에 시각화 (Loading/Ready/Error).

### 2.2 P0.5: 퀵 인터랙션 ✅

- **이 페이지 읽기 (Chat with Page):**
  - "이 페이지 읽기" 버튼 클릭 시 현재 탭 본문 추출
  - 추출된 컨텍스트 기반 질문 응답 (요약, 핵심 내용 등)
  - 컨텍스트 배너로 현재 읽은 페이지 표시
  - 불필요한 요소 자동 제거 (nav, footer, script 등)

- **우클릭 퀵 액션 (Context Menu):**
  - 텍스트 드래그 → 우클릭 → Memex 메뉴
  - 지원 액션:
    - "쉽게 설명해줘" - 복잡한 내용 쉽게 풀이
    - "한국어로 번역해줘" - 영어/외국어 번역
    - "요약해줘" - 3줄 요약
    - "이게 뭐야?" - 단어/개념 설명
  - 자동으로 사이드 패널 열림 + 즉시 응답

- **마크다운 & 코드 하이라이팅:**
  - AI 답변 마크다운 렌더링
  - 코드 블록 Syntax Highlighting (oneDark 테마)
  - 원클릭 코드 복사 버튼
  - 지원: 코드 블록, 인라인 코드, 볼드, 이탤릭

- **스트리밍 응답:**
  - `promptStreaming()` API로 실시간 응답 표시
  - 응답 생성 중 부분 텍스트 즉시 렌더링
  - 타이핑 효과로 UX 향상

- **페르소나 템플릿 (Persona Switcher):**
  - 헤더 드롭다운으로 AI 모드 전환
  - 기본 / 번역가 / 코드 리뷰어 / 요약 전문가 / 선생님
  - 각 페르소나별 시스템 프롬프트 자동 적용
  - 모드 전환 시 안내 메시지 표시

- **대화 히스토리 저장 (Chat Persistence):**
  - chrome.storage.local에 대화 자동 저장
  - 브라우저 재시작 후에도 대화 유지
  - 대화 목록 사이드바 (시간순 정렬)
  - 대화 내보내기 (JSON, Markdown)
  - 대화 삭제 기능

### 2.3 P1: 기억 확장 (Next Phase)

- **로컬 인덱싱 (Vector DB):** 방문한 페이지 텍스트를 임베딩하여 Orama DB에 영구 저장.
- **시맨틱 검색 (Semantic Search):** 키워드가 달라도 의미가 통하는 과거 기록 검색.

## 3. 사용자 플로우 (User Flow)

### 3.1 기본 사용
1. **설치:** 확장 프로그램 설치 및 권한 허용.
2. **초기화:** LanguageModel API 모델 다운로드 대기 (Progress UI 제공).
3. **사용:** `Cmd+B`로 사이드 패널 열기 → 질문 입력 → 답변 확인.

### 3.2 페이지 읽기
1. 웹 페이지 열기 (뉴스, 블로그, 문서 등)
2. 사이드 패널에서 **"이 페이지 읽기"** 버튼 클릭
3. 페이지 컨텍스트 배너 확인
4. 질문하기: "3줄로 요약해줘", "핵심이 뭐야?"

### 3.3 우클릭 퀵 액션
1. 웹 페이지에서 텍스트 드래그 선택
2. 우클릭 → **Memex** 메뉴 선택
3. 원하는 액션 클릭 (설명/번역/요약/검색)
4. 사이드 패널 자동 열림 + 즉시 응답

## 4. UI/UX 요구사항

- **톤앤매너:** 깔끔하고 신뢰감을 주는 블루/화이트 톤 (Tailwind CSS).
- **반응성:** AI 답변 생성 중 '생각 중(Thinking...)' 애니메이션 필수 제공.
- **에러 처리:** 모델이 없는 경우, 플래그 설정 가이드 링크 제공.
